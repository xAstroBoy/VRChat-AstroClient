namespace AstroClient.AstroUtils.ItemTweaker
{
	#region Imports

	using RubyButtonAPI;
	using System;
	using System.IO;
	using AstroClient.Cheetos;
	using AstroClient.ConsoleUtils;
	using AstroClient.Startup.Buttons;
	using AstroClient.AstroUtils.PlayerMovement;
	using AstroClient.variables;
	using AstroClient.UdonExploits;

	#endregion Imports

	public class ExploitsMenu : GameEvents
	{
		public static QMTabMenu SubMenu { get; private set; }

		public static QMSingleToggleButton ToggleHideAvatar;

		public static QMSingleToggleButton ToggleFly;

		public static QMSingleToggleButton ToggleNoClip;

		public static void InitButtons(QMTabMenu menu, float x, float y, bool btnHalf)
		{
			SubMenu = new QMTabMenu(2f, "Exploit Menu", null, null, null, "AstroClient.Resources.shuttle.png");

			ToggleHideAvatar = new QMSingleToggleButton(SubMenu, 4, 0f, "Hide Avatar ON", () => { AvatarHider.HideAvatar = true; }, "Hide Avatar OFF", new Action(() => { AvatarHider.HideAvatar = false; }), "Hides your avatar for yourself", UnityEngine.Color.green, UnityEngine.Color.red, null, false, false);

			if (File.Exists(Environment.CurrentDirectory + @"\RubyClient\RubyClient.dll"))
			{
				ModConsole.Log("RubyClient Detected Buttons Moved");
				ToggleFly = new QMSingleToggleButton(SubMenu, -0.6f, -1, "Fly", () => { Flight.FlyEnabled = true; }, "Fly", () => { Flight.FlyEnabled = false; }, "Enable/Disable Flight", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.FlyEnabled, true);
				ToggleNoClip = new QMSingleToggleButton(SubMenu, -0.6f, -0.5f, "NoClip", () => { Flight.NoClipEnabled = true; }, "NoClip", () => { Flight.NoClipEnabled = false; }, "Enable/Disable NoClip", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.NoClipEnabled, true);
			}
			else
			{
				ToggleFly = new QMSingleToggleButton(SubMenu, 0, -1, "Fly", () => { Flight.FlyEnabled = true; }, "Fly", () => { Flight.FlyEnabled = false; }, "Enable/Disable Flight", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.FlyEnabled, true);
				ToggleNoClip = new QMSingleToggleButton(SubMenu, 0, -0.5f, "NoClip", () => { Flight.NoClipEnabled = true; }, "NoClip", () => { Flight.NoClipEnabled = false; }, "Enable/Disable NoClip", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.NoClipEnabled, true);
			}

			ESPMenu.InitButtons(SubMenu, 1, 0, false);
			Movement.InitButtons(SubMenu, 1, 1, false);

			if (Bools.IsDeveloper) // KEEP DANGEROUS STUFF LIMITED TILL WE HAVE A CONTROL MECHANISM IN PLACE.
			{
				GlobalUdonExploits.InitButtons(SubMenu, 1, 2, false);
			}
		}
	}
}