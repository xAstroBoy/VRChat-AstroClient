namespace AstroClient.AstroUtils.ItemTweaker
{
	#region Imports

	using AstroClient.Cheetos;
	using AstroClient.Startup.Buttons;
	using AstroClient.UdonExploits;
	using AstroClient.variables;
	using AstroLibrary;
	using AstroLibrary.Console;
	using AstroLibrary.Extensions;
	using RubyButtonAPI;
	using System;
	using System.IO;
	using System.Reflection;

	#endregion Imports

	public class ExploitsMenu : GameEvents
    {
        public static QMTabMenu SubMenu { get; private set; }

        public static QMSingleToggleButton ToggleHideAvatar;

        public static QMSingleToggleButton ToggleFly;

        public static QMSingleToggleButton ToggleNoClip;

        public static void InitButtons(float pos)
        {
            SubMenu = new QMTabMenu(pos, "Exploit Menu", null, null, null, CheetosHelpers.ExtractResource(Assembly.GetExecutingAssembly(), "AstroClient.Resources.shuttle.png"));

            ToggleHideAvatar = new QMSingleToggleButton(SubMenu, 4, 0f, "Hide Avatar ON", () => { AvatarHider.HideAvatar = true; }, "Hide Avatar OFF", new Action(() => { AvatarHider.HideAvatar = false; }), "Hides your avatar for yourself", UnityEngine.Color.green, UnityEngine.Color.red, null, false, true);

            if (File.Exists(Environment.CurrentDirectory + @"\RubyClient\RubyClient.dll"))
            {
                ModConsole.Log("RubyClient Detected Buttons Moved");
                ToggleFly = new QMSingleToggleButton(SubMenu, -0.6f, -1, "Fly", () => { Flight.FlyEnabled = true; }, "Fly", () => { Flight.FlyEnabled = false; }, "Enable/Disable Flight", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.FlyEnabled, true);
                ToggleNoClip = new QMSingleToggleButton(SubMenu, -0.6f, -0.5f, "NoClip", () => { Flight.NoClipEnabled = true; }, "NoClip", () => { Flight.NoClipEnabled = false; }, "Enable/Disable NoClip", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.NoClipEnabled, true);
            }
            else
            {
                ToggleFly = new QMSingleToggleButton(SubMenu, 0, -1, "Fly", () => { Flight.FlyEnabled = true; }, "Fly", () => { Flight.FlyEnabled = false; }, "Enable/Disable Flight", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.FlyEnabled, true);
                ToggleNoClip = new QMSingleToggleButton(SubMenu, 0, -0.5f, "NoClip", () => { Flight.NoClipEnabled = true; }, "NoClip", () => { Flight.NoClipEnabled = false; }, "Enable/Disable NoClip", UnityEngine.Color.green, UnityEngine.Color.red, null, Flight.NoClipEnabled, true);
            }
            VRChat_Map_ESP_Menu.InitButtons(SubMenu, 1, 0f, true);

            MovementMenu.InitButtons(SubMenu, 1, 0.5f, true);

            if (Bools.IsDeveloper || NetworkingManager.HasUdon)
            {
                GlobalUdonExploits.InitButtons(SubMenu, 1, 1, true);
            }
            RandomSubmenus.TriggerSubMenu(SubMenu, 1, 1.5f, true);
            RandomSubmenus.VRC_InteractableSubMenu(SubMenu, 1, 2, true);

            new QMSingleButton(SubMenu, 2, 0f, "Make Every Pickup Bouncy", () => { WorldUtils.Get_Pickups().Add_Bouncer(false); }, "Turn Every World pickup Bouncy", null, null, true);
            new QMSingleButton(SubMenu, 2, 0.5f, "Remove Bouncers", () => { WorldUtils.Get_Pickups().Remove_Bouncer(); }, "Remove All Bouncing effects on pickups", null, null, true);
        }
    }
}